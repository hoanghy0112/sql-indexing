Write a prompt to build a rag for retrieving data from db that use:
- Use Debezium for Change Data Capture (CDC) for capturing data in the db
- postgresql for the db
- Write python fastapi server and langchain to handle user authentication (with jwt)/registration with username&password, add db to user account. When a new db is added to system, query its metadata, schema, conduct db analyzing (count rows, count/select(if count is not too large) distinct value, select sample random values, investigation relations to get insight about the whole db and each table) then store them as reference documents to be store in vector (Use google/embeddinggemma-300m for embedding) and can be easily used in rag to make it as context for searching in db. Then for each table, an llm (qwen3-4b) is used with ollama to decide which columns of which tables should be indexed (if value is random text, can be searched with; if value is category (based on count distinct value), don't index that column because all possible value is stored in metadata insight above). Important: consider the case that column is category but new value is not in the provided category, then update metadata insight document coresspondingly, when category has too much values, change it to random text search and start to index column instead). The flow of analyzing db is only executed when add db and periodically (1 week) or when user want (trigger via api)
- Python fastapi backend should have an api that can be used as a tool call function in other llm to search for requested data.
- Write an langgraph agent to get db data from user question (use above tool call function to search for filtered data in db and db schema/metadata/insight), then write api to that (with a toggle field to toggle explain mode, in explain mode, generate sql + data; in non-explain mode, just response a raw csv data without neither markdown wrapper nor explaination).
- Write other apis to get db status, information, permission, check errors, manage chat history, manage db, manage user permission to db, manage sql running history, manage metadata/insight/analyzing, manage loading status/progress, etc... to make it more professional
- Write an nextjs website for the above features, including: authentication, user can add db, wait for system to get insight and index all of them before starting to ask for data. Techstack: react query, shacdn + tailwind, modern next design. UI notes: have 2 tabs: 
 + Home page: list all db added, its status, for each db, able to share with others (other can ask for that shared db). Have a button to add new db
 + Db page: have 4 tabs: General (db name, infor, status, created/updated date, shared user (able to manage it), etc...); Ask DB (show conversation list (chat history) and message panel to ask data from db (like chatgpt); Index (Store index size, insight/metadata (able to edit it), schema), each info should be store in a card with icons, click to open a modal to interact more deeply, user can choose to re-analyze db; Settings (for setting db connection config, manage shared, remove db)

# Note for project creating:
- Project should have a docker-compose to run other required services.
- Project should have a production docker-compose to build and run all services.
- Write in single monorepo project and all script to install, setup, run services for convenient
- Store secret in .env